{"id":328,"date":"2020-11-01T10:58:39","date_gmt":"2020-11-01T15:58:39","guid":{"rendered":"http:\/\/virtualizedtaylor.com\/?p=328"},"modified":"2021-05-16T09:44:53","modified_gmt":"2021-05-16T14:44:53","slug":"upgrade-to-esxi-7-0-u1-with-the-cli","status":"publish","type":"post","link":"https:\/\/virtualizedtaylor.wpcomstaging.com\/2020\/11\/01\/upgrade-to-esxi-7-0-u1-with-the-cli\/","title":{"rendered":"Upgrade to ESXI 7.0 U1 with the CLI"},"content":{"rendered":"\n<p>ESXI 7.0 U1 is here and it is time to upgrade! Normally upgrading ESXI would involve Update Manager and vCenter but in a situation where you have a single host and vCenter runs on that host, your upgrade options are limited.<\/p>\n\n\n\n<p>To start the upgrade process, you will need to download and upload (to a datastore) the offline bundle. These bundles can be found from the my.vmware.com, VMUG or vExpert download portals. Once the bundle is downloaded, you will need to upload to the datastore using the upload button.<\/p>\n\n\n\n<div class=\"wp-block-image\"><figure class=\"aligncenter size-large\"><img loading=\"lazy\" decoding=\"async\" width=\"700\" height=\"80\" data-attachment-id=\"331\" data-permalink=\"https:\/\/virtualizedtaylor.wpcomstaging.com\/image-3\/\" data-orig-file=\"https:\/\/i0.wp.com\/virtualizedtaylor.wpcomstaging.com\/wp-content\/uploads\/2020\/11\/image.png?fit=939%2C107&amp;ssl=1\" data-orig-size=\"939,107\" data-comments-opened=\"1\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"image\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https:\/\/i0.wp.com\/virtualizedtaylor.wpcomstaging.com\/wp-content\/uploads\/2020\/11\/image.png?fit=300%2C34&amp;ssl=1\" data-large-file=\"https:\/\/i0.wp.com\/virtualizedtaylor.wpcomstaging.com\/wp-content\/uploads\/2020\/11\/image.png?fit=700%2C80&amp;ssl=1\" src=\"https:\/\/i0.wp.com\/virtualizedtaylor.wpcomstaging.com\/wp-content\/uploads\/2020\/11\/image.png?resize=700%2C80&#038;ssl=1\" alt=\"\" class=\"wp-image-331\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p>After the upload is complete, it is time to kick off the upgrade. Start by SSHing to your ESXI host. You may have to enable SSH as it is disabled by default. This can be done by navigating to Host -&gt; Actions -&gt; Services -&gt; Enable Secure Shell (SSH). Your SSH session should look something like this:<\/p>\n\n\n\n<div class=\"wp-block-image\"><figure class=\"aligncenter size-large\"><img loading=\"lazy\" decoding=\"async\" width=\"697\" height=\"368\" data-attachment-id=\"336\" data-permalink=\"https:\/\/virtualizedtaylor.wpcomstaging.com\/image-2-2\/\" data-orig-file=\"https:\/\/i0.wp.com\/virtualizedtaylor.wpcomstaging.com\/wp-content\/uploads\/2020\/11\/image-2.png?fit=697%2C368&amp;ssl=1\" data-orig-size=\"697,368\" data-comments-opened=\"1\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"image-2\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https:\/\/i0.wp.com\/virtualizedtaylor.wpcomstaging.com\/wp-content\/uploads\/2020\/11\/image-2.png?fit=300%2C158&amp;ssl=1\" data-large-file=\"https:\/\/i0.wp.com\/virtualizedtaylor.wpcomstaging.com\/wp-content\/uploads\/2020\/11\/image-2.png?fit=697%2C368&amp;ssl=1\" src=\"https:\/\/i0.wp.com\/virtualizedtaylor.wpcomstaging.com\/wp-content\/uploads\/2020\/11\/image-2.png?resize=697%2C368&#038;ssl=1\" alt=\"\" class=\"wp-image-336\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p>Once an SSH connection is established, we can enter Maintenance Mode with the following command:<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>vim-cmd \/hostsvs\/maintenance_mode_enter<\/code><\/pre>\n\n\n\n<p>This command kicks off the equivalent tasks as the &#8220;Enter Maintenance Mode&#8221; from the GUI. Once the host is in Maintenance Mode, the upgrade can be initiated using the following command:<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>esxcli software vib update -d \/vmfs\/volumes\/datastore-name\/offline-bundle-name.zip<\/code><\/pre>\n\n\n\n<p>The main command that we are using is &#8220;esxcli software vib update&#8221;. The -d switch informs the command where the offline bundle is located. This portion should be updated to match your environment. The install will take a few minutes but once it is complete, the shell prompt will return.<\/p>\n\n\n\n<p>After the prompt has returned, you can initiate the following command to reboot the host:<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>reboot<\/code><\/pre>\n\n\n\n<p> Once the reboot is successful and complete. The host will be running your newly installed version!<\/p>\n\n\n\n<div class=\"wp-block-image\"><figure class=\"aligncenter size-large\"><img loading=\"lazy\" decoding=\"async\" width=\"570\" height=\"194\" data-attachment-id=\"338\" data-permalink=\"https:\/\/virtualizedtaylor.wpcomstaging.com\/image-3-2\/\" data-orig-file=\"https:\/\/i0.wp.com\/virtualizedtaylor.wpcomstaging.com\/wp-content\/uploads\/2020\/11\/image-3.png?fit=570%2C194&amp;ssl=1\" data-orig-size=\"570,194\" data-comments-opened=\"1\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"image-3\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https:\/\/i0.wp.com\/virtualizedtaylor.wpcomstaging.com\/wp-content\/uploads\/2020\/11\/image-3.png?fit=300%2C102&amp;ssl=1\" data-large-file=\"https:\/\/i0.wp.com\/virtualizedtaylor.wpcomstaging.com\/wp-content\/uploads\/2020\/11\/image-3.png?fit=570%2C194&amp;ssl=1\" src=\"https:\/\/i0.wp.com\/virtualizedtaylor.wpcomstaging.com\/wp-content\/uploads\/2020\/11\/image-3.png?resize=570%2C194&#038;ssl=1\" alt=\"\" class=\"wp-image-338\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p>The offline bundle is a great way to upgrade single node or non-vcenter environments without breaking out the KVM\/USB Drives!<\/p>\n","protected":false},"excerpt":{"rendered":"<p>ESXI 7.0 U1 is here and it is time to upgrade! Normally upgrading ESXI would involve Update Manager and vCenter but in a situation where you have a single host and vCenter runs on that host, your upgrade options are limited. To start the upgrade process, you will need to download and upload (to a &hellip; <a href=\"https:\/\/virtualizedtaylor.wpcomstaging.com\/2020\/11\/01\/upgrade-to-esxi-7-0-u1-with-the-cli\/\" class=\"more-link\">Continue reading <span class=\"screen-reader-text\">Upgrade to ESXI 7.0 U1 with the CLI<\/span> <span class=\"meta-nav\">&rarr;<\/span><\/a><\/p>\n","protected":false},"author":62406288,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_coblocks_attr":"","_coblocks_dimensions":"","_coblocks_responsive_height":"","_coblocks_accordion_ie_support":"","advanced_seo_description":"","jetpack_seo_html_title":"","jetpack_seo_noindex":false,"jetpack_post_was_ever_published":false,"_jetpack_newsletter_access":"","_jetpack_dont_email_post_to_subs":false,"_jetpack_newsletter_tier_id":0,"footnotes":"","jetpack_publicize_message":"Upgrade to ESXI 7.0 U1 with the CLI! #VMWare #vExpert @VMware #LabEveryDay","jetpack_publicize_feature_enabled":true,"jetpack_social_post_already_shared":false,"jetpack_social_options":{"image_generator_settings":{"template":"highway","enabled":false}}},"categories":[7101563,40559,38600],"tags":[],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"","jetpack_likes_enabled":true,"jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/paI6yL-5i","jetpack-related-posts":[],"_links":{"self":[{"href":"https:\/\/virtualizedtaylor.wpcomstaging.com\/wp-json\/wp\/v2\/posts\/328"}],"collection":[{"href":"https:\/\/virtualizedtaylor.wpcomstaging.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/virtualizedtaylor.wpcomstaging.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/virtualizedtaylor.wpcomstaging.com\/wp-json\/wp\/v2\/users\/62406288"}],"replies":[{"embeddable":true,"href":"https:\/\/virtualizedtaylor.wpcomstaging.com\/wp-json\/wp\/v2\/comments?post=328"}],"version-history":[{"count":11,"href":"https:\/\/virtualizedtaylor.wpcomstaging.com\/wp-json\/wp\/v2\/posts\/328\/revisions"}],"predecessor-version":[{"id":344,"href":"https:\/\/virtualizedtaylor.wpcomstaging.com\/wp-json\/wp\/v2\/posts\/328\/revisions\/344"}],"wp:attachment":[{"href":"https:\/\/virtualizedtaylor.wpcomstaging.com\/wp-json\/wp\/v2\/media?parent=328"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/virtualizedtaylor.wpcomstaging.com\/wp-json\/wp\/v2\/categories?post=328"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/virtualizedtaylor.wpcomstaging.com\/wp-json\/wp\/v2\/tags?post=328"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}